(function(){function F(){console.log("barrel");y.load("./model/barrel2.obj",function(a){console.dir("GB: "+a.children[0].geometry.attributes.position.count);a=(new THREE.Geometry).fromBufferGeometry(a.children[0].geometry);a.mergeVertices();g=new THREE.BufferGeometry;for(var c=[],b=0;b<a.vertices.length;b++)c.push(a.vertices[b].x),c.push(a.vertices[b].y),c.push(a.vertices[b].z);g.addAttribute("position",new THREE.Float32BufferAttribute(c,3));g.attributes.position.needsUpdate=!0;console.dir("GB: "+
    g.attributes.position.count);g.rotateZ(Math.PI/4);g.rotateY(Math.PI/5)})}function G(){function c(){a.attributes.position.setXYZ(this.idx,this.x,this.y,this.z);a.attributes.pSize.setX(this.idx,this.size);a.attributes.color.setXYZ(this.idx,this.R,this.G,this.B);a.attributes.pOpacity.setX(this.idx,this.opacity)}console.log(r.vertices.length);for(var d=0,b=0;b<a.attributes.position.count;b++){var h={x:a.attributes.position.getX(b),y:a.attributes.position.getY(b),z:a.attributes.position.getZ(b),size:.7,
    R:1,G:1,B:1,opacity:0,idx:b};var e={x:t.geometry.vertices[b].x,y:t.geometry.vertices[b].y,z:t.geometry.vertices[b].z,size:.5,R:1,G:1,B:1,opacity:1,idx:b};(new TWEEN.Tween(h)).to(e,3E3).easing(TWEEN.Easing.Linear.None).onUpdate(c).delay(3E3).onStart(function(){}).onComplete(function(){d++;d===a.attributes.position.count-1&&(m=a.clone(),n=!0,F())}).start()}}function H(){function c(){a.attributes.position.setXYZ(this.idx,this.x,this.y,this.z)}var d=0;n=!1;console.log("comeBack - "+m.attributes.position.count);
    for(var b=0;b<a.attributes.position.count;b++){var h={x:a.attributes.position.getX(b),y:a.attributes.position.getY(b),z:a.attributes.position.getZ(b),idx:b};var e={x:m.attributes.position.getX(b),y:m.attributes.position.getY(b),z:m.attributes.position.getZ(b),idx:b};(new TWEEN.Tween(h)).to(e,1E3).easing(TWEEN.Easing.Elastic.Out).onUpdate(c).onComplete(function(){d++;d===a.attributes.position.count-1&&(n=!0,w=!1,console.log("complete"))}).start()}}function I(a,d){for(var b=a.getPoints(d),c=[],e,f=
    1;f<b.length;f++)e=m.clone(),e.scale(.2*Math.random(),.2*Math.random(),.2*Math.random()),e.rotateX(2*Math.random()*Math.PI),e.rotateY(2*Math.random()*Math.PI),e.rotateZ(2*Math.random()*Math.PI),e.translate(b[f].x,b[f].y,b[f].z),c.push(e);c.push(g);return c}function J(a,d){for(var b=[],c=[],e=[],f=1;f<d.length;f++)b.push(d[f].attributes.position.getX(a)),c.push(d[f].attributes.position.getY(a)),e.push(d[f].attributes.position.getZ(a));return{x:b,y:c,z:e,idx:a,R:.1,G:.8,B:.1}}function K(c){function d(){a.attributes.position.setXYZ(this.idx,
    this.x,this.y,this.z);a.attributes.color.setXYZ(this.idx,this.R,this.G,this.B)}c=I(c,35);for(var b=0;b<a.attributes.position.count;b++){var h={x:a.attributes.position.getX(b),y:a.attributes.position.getY(b),z:a.attributes.position.getZ(b),R:1,G:1,B:1,idx:b};(new TWEEN.Tween(h)).to(J(b,c),Math.floor(3E3*Math.random()+1E3)).easing(TWEEN.Easing.Exponential.InOut).onUpdate(d).start()}}var v,k,l,t,r,g,a,m,u,p=window.innerWidth,q=window.innerHeight;console.log("here - 0");var n=!1,x=!1;Detector.webgl||
Detector.addGetWebGLMessage();var y=new THREE.OBJLoader,z=new THREE.Raycaster,A=1E3,B=.8,C=.0015,w=!1,D=function(c){requestAnimationFrame(D);if(t){if(x){A=500;B=3;C=.5;w=!0;for(var d=new THREE.Vector2(10,10),b=0;b<a.attributes.position.count;b++){var h=a.attributes.position.getX(b),e=a.attributes.position.getY(b),f=a.attributes.position.getZ(b);h=(new THREE.Vector2(h,e)).sub(d);c&&(a.attributes.position.setZ(b,Math.sin(h.length()/-B+c/A)*C+f),a.attributes.position.needsUpdate=!0)}}else n&&w&&(console.log("distort"),
    H());a.attributes.position.needsUpdate=!0;a.attributes.pSize.needsUpdate=!0;a.attributes.color.needsUpdate=!0;a.attributes.pOpacity.needsUpdate=!0;u.rotateY(L)}TWEEN.update();l.render(v,k)},M=function(){var a=[];a.push(new THREE.Vector3(0,0,0));for(var d=0;4>d;d++)a.push(new THREE.Vector3(400*Math.random()-200,400*Math.random()-200,-100));a.push(new THREE.Vector3(0,0,0));a=new THREE.CatmullRomCurve3(a);a.curveType="centripetal";return a}();(function(){v=new THREE.Scene;k=new THREE.PerspectiveCamera(75,
    p/q,.001,1E4);k.position.set(-30,0,100);v.add(k);l=new THREE.WebGLRenderer({antialias:!0,alpha:!0});l.setPixelRatio(window.devicePixelRatio);l.setSize(p,q);l.setClearColor(0,0);document.getElementById("container3D").appendChild(l.domElement);console.log("here - 1");var c={map:{value:(new THREE.TextureLoader).load("./img/disc.png")},size:{value:3},opacity:{value:0},scale:{value:100},psColor:{value:new THREE.Color(5592490)}},d=new THREE.ShaderMaterial({uniforms:c,transparent:!0,blending:THREE.AdditiveBlending,
    depthTest:!1,vertexColors:!0,vertexShader:document.getElementById("particleVertexShader").text,fragmentShader:document.getElementById("particleFragmentShader").text});(function(b,c,d){console.log("inside");d=[];for(var e=[],h=[],g=[],k,l,m=0;m<c;)k=b*Math.random()*Math.pow(-1,Math.round(Math.random())),l=b*Math.random()*Math.pow(-1,Math.round(Math.random())),b*b<k*k+l*l||(m++,g.push(k),g.push(l),g.push(0),h.push(.7,.7,.7),d.push(2),e.push(1));a=new THREE.BufferGeometry;a.addAttribute("position",new THREE.Float32BufferAttribute(g,
    3));a.addAttribute("color",new THREE.Float32BufferAttribute(h,3));a.addAttribute("pSize",(new THREE.Float32BufferAttribute(d,1)).setDynamic(!0));a.addAttribute("pOpacity",(new THREE.Float32BufferAttribute(e,1)).setDynamic(!0))})(100,22654,new THREE.Vector3(0,0,20));a.clone();u=new THREE.Points(a,d);a.translate(0,0,100);v.add(u);u.sortParticles=!1;y.load("./model/globus_one_layer_smooth2.obj",function(b){r=(new THREE.Geometry).fromBufferGeometry(b.children[0].geometry);r.mergeVertices();r.scale(9,
    9,9);d=new THREE.MeshBasicMaterial({color:13056,side:THREE.DoubleSide,wireframe:!0});t=new THREE.Mesh(r,d);G()});c=document.querySelector("#SELogo");TweenLite.from(c,0,{ease:Power1.easeInOut,y:window.innerHeight/2,scale:2,delay:.5});c=document.querySelector("#title");TweenLite.from(c,0,{ease:Power1.easeInOut,y:20,scale:.8,delay:2.5,opacity:0});c=document.querySelector("#text");TweenLite.from(c,0,{ease:Power1.easeInOut,y:20,delay:3,opacity:0,onComplete:function(){}});window.addEventListener("resize",
    function(){p=window.innerWidth;q=window.innerHeight;k.aspect=p/q;k.updateProjectionMatrix();l.setSize(p,q)});document.addEventListener("mousemove",function(b){b.preventDefault();var a=new THREE.Vector2(b.clientX/p*2-1,2*-(b.clientY/q)+1);var c=u;b=new THREE.Vector3;z.setFromCamera(a,k);a=z.intersectObject(c);0<a.length?(b.copy(a[0].point),b=!0):b=!1;x=!1;b&&n&&(x=!0)});document.addEventListener("click",function(a){a.preventDefault();n&&K(M)})})();for(var N=[],E=0;E<a.attributes.position.count/10;E++)N.push(Math.round(Math.random()*
    a.attributes.position.count));var L=5E-4;D()})();
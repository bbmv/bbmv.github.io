(function(){function G(a,c,d,g){function l(k,b,e,a){(new THREE.OBJLoader).load(k,function(k){var f=(new THREE.Geometry).fromBufferGeometry(k.children[0].geometry);f.mergeVertices();k=[];for(var h=0;h<f.vertices.length;h++)k.push(f.vertices[h].x),k.push(f.vertices[h].y),k.push(f.vertices[h].z);f=new THREE.BufferGeometry;f.addAttribute("position",new THREE.Float32BufferAttribute(k,3));p.push({geometry:f,color:b,opacity:e});a(f)})}function u(k){console.log(p.length);console.log(p[k]);return p[k]}function q(k,
b,e,a){var h=[];h.push(new THREE.Vector3(0,0,0));for(var f=0;f<a;f++)h.push(new THREE.Vector3(k*Math.random()-k/2,b*Math.random()-b/2,e));h.push(new THREE.Vector3(100*Math.random()-50,100*Math.random()-50,0));return new THREE.CatmullRomCurve3(h)}function r(k,b,e){b=b.getPoints(e);e=[];for(var a,h=1;h<b.length;h++)a=p[k-1].geometry.clone(),a.scale(.2*Math.random(),.2*Math.random(),.2*Math.random()),a.rotateX(2*Math.random()*Math.PI),a.rotateY(2*Math.random()*Math.PI),a.rotateZ(2*Math.random()*Math.PI),
a.translate(b[h].x,b[h].y,b[h].z),e.push(a);e.push(p[k].geometry);return e}function t(k,b,e,a){for(var h=[],f=[],c=[],g=1;g<b.length;g++)h.push(b[g].attributes.position.getX(k)),f.push(b[g].attributes.position.getY(k)),c.push(b[g].attributes.position.getZ(k));return{x:h,y:f,z:c,R:e.r,G:e.g,B:e.b,opacity:a,idx:k}}var v=!1,z=!1,p=[],b=function(b,a){for(var k=[],h=[],g=[],f=[],c,d,A=b/2,l=0;l<a;l++)c=b*Math.random()-A,d=b*Math.random()-A,f.push(c),f.push(d),f.push(0),g.push(.7,.7,.7),k.push(2),h.push(0);
c=new THREE.BufferGeometry;c.addAttribute("position",new THREE.Float32BufferAttribute(f,3));c.addAttribute("color",new THREE.Float32BufferAttribute(g,3));c.addAttribute("pSize",(new THREE.Float32BufferAttribute(k,1)).setDynamic(!0));c.addAttribute("pOpacity",(new THREE.Float32BufferAttribute(h,1)).setDynamic(!0));return c}(a,c),w=function(b,a,e){e={map:{value:(new THREE.TextureLoader).load(e)},size:{value:3},opacity:{value:0},scale:{value:100},psColor:{value:new THREE.Color(5592490)}};e=new THREE.ShaderMaterial({uniforms:e,
transparent:!0,blending:THREE.AdditiveBlending,depthTest:!1,vertexColors:!0,vertexShader:document.getElementById("particleVertexShader").text,fragmentShader:document.getElementById("particleFragmentShader").text});e=new THREE.Points(b,e);b.translate(a.x,a.y,a.z);e.sortParticles=!1;return e}(b,d,g),x;p.push({geometry:b,color:new THREE.Color(16777215),opacity:1});y.add(w);return{addModel:l,update:function(){b.attributes.position.needsUpdate=!0;b.attributes.pSize.needsUpdate=!0;b.attributes.color.needsUpdate=
!0;b.attributes.pOpacity.needsUpdate=!0},rotateY:function(b){w.rotateY(b)},firstTransition:function(a,c,e,g){function k(){b.attributes.position.setXYZ(this.idx,this.x,this.y,this.z);b.attributes.pSize.setX(this.idx,this.size);b.attributes.color.setXYZ(this.idx,this.R,this.G,this.B);b.attributes.pOpacity.setX(this.idx,this.opacity)}var f=p[a].geometry;a=p[a].color;var h=0,d=new THREE.Color(n[0].color);v=!1;for(var l=0;l<b.attributes.position.count;l++){var u={x:b.attributes.position.getX(l),y:b.attributes.position.getY(l),
z:b.attributes.position.getZ(l),size:.7,R:d.r,G:d.g,B:d.b,opacity:0,idx:l};var m={x:f.attributes.position.getX(l),y:f.attributes.position.getY(l),z:f.attributes.position.getZ(l),size:.5,R:a.r,G:a.g,B:a.b,opacity:1,idx:l};l>=f.attributes.position.count&&(m.opacity=0);(new TWEEN.Tween(u)).to(m,c*Math.random()).easing(TWEEN.Easing.Sinusoidal.In).onUpdate(k).delay(e).onStart(function(){}).onComplete(function(){h++;h===b.attributes.position.count-1&&(v=!0,x=b.clone(),g())}).start()}},transition:function(a,
c){function e(){b.attributes.position.setXYZ(this.idx,this.x,this.y,this.z);b.attributes.color.setXYZ(this.idx,this.R,this.G,this.B);b.attributes.pOpacity.setX(this.idx,this.opacity)}var g=p[c].color,k=p[c].opacity,f=q(300,300,-100,2);f=r(a,f,20);var h=0;v=!1;for(var d=0;d<b.attributes.position.count;d++){var m={x:b.attributes.position.getX(d),y:b.attributes.position.getY(d),z:b.attributes.position.getZ(d),R:g.r,G:g.g,B:g.b,opacity:k,idx:d};(new TWEEN.Tween(m)).to(t(d,f,p[a].color,p[a].opacity),Math.floor(500*
Math.random()+3E3)).easing(TWEEN.Easing.Exponential.InOut).onUpdate(e).onComplete(function(){h++;h===b.attributes.position.count-1&&(x=b.clone(),v=!0,a+1<=n.length&&!u(a+1)&&l(n[a].url,new THREE.Color(n[a].color),1,function(a){}))}).start()}},getPointsCloud:function(){return w},waveMesh:function(a,c,e,g){z=!0;for(var k=new THREE.Vector2(10,10),f=0;f<b.attributes.position.count;f++){var h=b.attributes.position.getX(f),d=b.attributes.position.getY(f),l=b.attributes.position.getZ(f);h=(new THREE.Vector2(h,
d)).sub(k);a&&(b.attributes.position.setZ(f,Math.sin(h.length()/-c+a/e)*g+l),b.attributes.position.needsUpdate=!0)}},stopWaving:function(){function a(){b.attributes.position.setXYZ(this.idx,this.x,this.y,this.z)}var c=0;v=!1;for(var e=0;e<b.attributes.position.count;e++){var g={x:b.attributes.position.getX(e),y:b.attributes.position.getY(e),z:b.attributes.position.getZ(e),idx:e};var d={x:x.attributes.position.getX(e),y:x.attributes.position.getY(e),z:x.attributes.position.getZ(e),idx:e};(new TWEEN.Tween(g)).to(d,
1E3).easing(TWEEN.Easing.Elastic.Out).onUpdate(a).onComplete(function(){c++;c===b.attributes.position.count-1&&(v=!0,z=!1)}).start()}},complete:function(){return v},distortion:function(){return z},moveCamera:function(a){var b=new TWEEN.Tween({x:m.position.x}),c=30;0!==a%2&&(c=-30);b.to({x:c},3500).easing(TWEEN.Easing.Exponential.InOut).onUpdate(function(){m.position.x=this.x}).start()},modelExists:u,modelsAmount:function(){return p.length}}}function H(a,c,d,g){TweenLite.to(c,1,{ease:Power1.easeInOut,
y:-20,scale:.8,delay:a,opacity:0});TweenLite.to(document.body,1,{backgroundImage:"linear-gradient(-60deg, #000, #000)",delay:a});TweenLite.to(d,1,{ease:Power1.easeInOut,y:-45,scale:.8,delay:a,onComplete:g,opacity:0})}function I(a){var c=document.querySelector("#note"),d=document.querySelector("#note__title"),g=document.querySelector("#note__text"),l=document.querySelector("#page_num .page_num_cls-3");document.querySelector("#page_num .page_num_cls-1").textContent=a;l.style.stroke=n[a-1].color;a%2?
B(c):C(c);d.textContent="";d.style.color=n[a-1].color;g.textContent="";document.body.style.background=n[a-1].background}function D(a){function c(){a%2?B(d):C(d);g.textContent=n[a-1].title;g.style.color=n[a-1].color;l.textContent=n[a-1].text;var c=g,m=l,q=n[a-1].background;TweenLite.to(c,0,{ease:Power1.easeInOut,y:0,scale:1,opacity:1});TweenLite.to(m,0,{ease:Power1.easeInOut,y:0,scale:1,opacity:1});TweenLite.to(document.body,1,{backgroundImage:q,delay:0});TweenLite.from(c,1,{ease:Power1.easeInOut,
y:20,scale:.8,delay:0,opacity:0});TweenLite.from(m,.5,{ease:Power1.easeInOut,y:20,delay:.5,opacity:0})}var d=document.querySelector("#note"),g=document.querySelector("#note__title"),l=document.querySelector("#note__text"),m=document.querySelector("#page_num .page_num_cls-3"),q=document.querySelector("#page_num .page_num_cls-1"),r=!1;0>a&&(r=!0,a=1);q.textContent=a;m.style.stroke=n[a-1].color;r?c():H(0,g,l,c)}function C(a){a.classList.remove("to_left");a.classList.add("to_right")}function B(a){a.classList.remove("to_right");
a.classList.add("to_left")}var y,m,q,d,r=window.innerWidth,t=window.innerHeight,w=!1;Detector.webgl||Detector.addGetWebGLMessage();var E=new THREE.Raycaster,n=[{title:"\u042d\u041b\u0415\u041a\u0422\u0420\u041e\u042d\u041d\u0415\u0420\u0413\u0418\u042f",text:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f \u0447\u0435\u043b\u043e\u0432\u0435\u0447\u0435\u0441\u0442\u0432\u043e \u043d\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u044f\u0435\u0442 \u0441\u0432\u043e\u044e \u0436\u0438\u0437\u043d\u044c \u0431\u0435\u0437 \u044d\u043b\u0435\u043a\u0442\u0440\u0438\u0447\u0435\u0441\u0442\u0432\u0430. \u0421 \u043a\u0430\u0436\u0434\u044b\u043c \u0433\u043e\u0434\u043e\u043c \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u044d\u043d\u0435\u0440\u0433\u0438\u0438 \u0440\u0430\u0441\u0442\u0435\u0442. \u0417\u0430 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 5 \u043b\u0435\u0442 \u043c\u0438\u0440\u043e\u0432\u043e\u0435 \u043f\u043e\u0442\u0440\u0435\u0431\u043b\u0435\u043d\u0438\u0435 \u044d\u043b\u0435\u043a\u0442\u0440\u043e\u044d\u043d\u0435\u0440\u0433\u0438\u0438 \u0432\u044b\u0440\u043e\u0441\u043b\u043e \u043d\u0430 20%.",
color:"#00b2ff",background:"linear-gradient(-60deg, #3f000b, #1b0383)",url:"./model/globus3.obj"},{title:"\u0420\u0415\u0421\u0423\u0420\u0421\u042b",text:"TEXT 2",color:"#fa00ff",background:"linear-gradient(-60deg, #003f15, #1b0383)",url:"./model/barrel3.obj"},{title:"\u042d\u041a\u041e\u041b\u041e\u0413\u0418\u042f",text:"TEXT 3",color:"#00ff10",background:"linear-gradient(-60deg, #1b0383, #3f000b)",url:"./model/plant3.obj"},{title:"\u0422\u0415\u0425\u041d\u041e\u041b\u041e\u0413\u0418\u042f",
text:"TEXT 4",color:"#b000ff",background:"linear-gradient(-60deg, #1b0383, #3f000b)",url:"./model/gear3.obj"},{title:"\u041f\u0420\u0418\u0411\u042b\u041b\u042c",text:"TEXT 5",color:"#00ffff",background:"linear-gradient(-60deg, #003f15, #3f000b)",url:"./model/bitcoin3.obj"},{title:"TITLE 6",text:"TEXT 6",color:"#ff0",background:"linear-gradient(-60deg, #3f000b, #003f15)",url:"./model/barrel3.obj"}],F=function(a){requestAnimationFrame(F);d.complete()&&(w?d.waveMesh(a,3,500,.5):d.distortion()&&d.stopWaving(),
d.rotateY(J));q.render(y,m);TWEEN.update();d.update()};(function(){y=new THREE.Scene;m=new THREE.PerspectiveCamera(75,r/t,.001,1E4);m.position.set(-30,0,100);y.add(m);q=new THREE.WebGLRenderer({antialias:!0,alpha:!0});q.setPixelRatio(window.devicePixelRatio);q.setSize(r,t);q.setClearColor(0,0);document.getElementById("container3D").appendChild(q.domElement);d=new G(200,22E3,new THREE.Vector3(0,0,100),"./maps/disc.png");I(1);var a=document.querySelector("#SELogo");TweenLite.from(a,2,{ease:Power1.easeInOut,
y:window.innerHeight/2,scale:2,delay:.5,onComplete:function(){d.addModel(n[0].url,new THREE.Color(n[0].color),1,function(a){D(-1);d.firstTransition(1,3E3,500,function(){d.addModel(n[1].url,new THREE.Color(n[1].color),1,function(a){})})})}});window.addEventListener("resize",function(){r=window.innerWidth;t=window.innerHeight;m.aspect=r/t;m.updateProjectionMatrix();q.setSize(r,t)});document.addEventListener("mousemove",function(a){a.preventDefault();var c=new THREE.Vector2(a.clientX/r*2-1,2*-(a.clientY/
t)+1);var g=d.getPointsCloud();a=new THREE.Vector3;E.setFromCamera(c,m);c=E.intersectObject(g);0<c.length?(a.copy(c[0].point),a=!0):a=!1;w=!1;a&&d.complete()&&(w=!0)});var c=1,u=0;document.addEventListener("wheel",function(a){a.preventDefault();if(d.complete()){var g=c;0>a.wheelDelta?c++:c--;var m=d.modelsAmount();console.log("amount: "+m);1>c?c=1:5<c?c=5:(console.log("model: "+c),c+1>m&&c--,c!==u&&(u=c,d.transition(c,g),d.moveCamera(c),D(c),console.log(a.wheelDelta)))}})})();var J=5E-4;F()})();
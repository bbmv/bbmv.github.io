(function(){function Y(a,b){function c(a){var b=[-60,60];var e=[-80,40],z=[10,0],n=[-50,50],f=[-50,50],q=[-10,0],h=new THREE.Color("hsl("+(240*Math.random()+120)+", 60%, 80%)");d.attributes.aColor.setXYZ(a,h.r,h.g,h.b);b={x:Math.random()*(b[1]-b[0])+b[0],y:Math.random()*(e[1]-e[0])+e[0],z:Math.random()*(z[1]-z[0])+z[0],size:1.5*Math.random()+1,opacity:1,idx:a};a={x:Math.random()*(n[1]-n[0])+n[0],y:Math.random()*(f[1]-f[0])+f[0],z:Math.random()*(q[1]-q[0])+q[0],size:.5*Math.random()+.5,opacity:0,idx:a};
(new TWEEN.Tween(b)).to(a,3*Math.random()+3E3).easing(TWEEN.Easing.Sinusoidal.In).onUpdate(function(){d.attributes.position.setXYZ(this.idx,this.x,this.y,this.z);d.attributes.size.setX(this.idx,this.size);d.attributes.opacity.setX(this.idx,this.opacity)}).delay(6E3*Math.random()).onComplete(function(){c(this.idx)}).start()}var d=function(a){for(var c=[],b=[],d=[],e=[],f=0;f<a;f++)e.push(0),e.push(0),e.push(0),d.push(.5,.5,.5),c.push(1),b.push(0);a=new THREE.BufferGeometry;a.addAttribute("position",
new THREE.Float32BufferAttribute(e,3));a.addAttribute("aColor",new THREE.Float32BufferAttribute(d,3));a.addAttribute("size",(new THREE.Float32BufferAttribute(c,1)).setDynamic(!0));a.addAttribute("opacity",(new THREE.Float32BufferAttribute(b,1)).setDynamic(!0));return a}(a),e=function(a,c){var b={map:{value:(new THREE.TextureLoader).load(c)}};b=new THREE.ShaderMaterial({uniforms:b,transparent:!0,blending:THREE.AdditiveBlending,depthTest:!1,vertexColors:!0,vertexShader:document.getElementById("particleVertexShader").text,
fragmentShader:document.getElementById("particleFragmentShader").text});b=new THREE.Points(a,b);b.sortParticles=!1;return b}(d,b);y.add(e);(function(){for(var a=0;a<d.attributes.position.count;a++)c(a)})();return{update:function(){d.attributes.position.needsUpdate=!0;d.attributes.size.needsUpdate=!0;d.attributes.aColor.needsUpdate=!0;d.attributes.opacity.needsUpdate=!0}}}function Z(a,b,c,d){function e(a,c,b,e){aa(a,function(a){for(var l=a.match(/v +-*[.\d]+ +-*[.\d]+ +-*[.\d]+/g),g=[],k=0;k<l.length;k++)g.push(l[k].match(/-*[.\d]+/g));
l=a.match(/f +[.\d]+ +[.\d]+ +[.\d]+/g);a=[];for(var d=0;d<l.length;d++){k=l[d].match(/[.\d]+/g);for(var f=0;f<k.length;f++)--k[f];a.push(k)}l=new THREE.Geometry;for(k=0;k<g.length;k++)l.vertices.push(new THREE.Vector3(Number(g[k][0]),Number(g[k][1]),Number(g[k][2])));for(g=0;g<a.length;g++)l.faces.push(new THREE.Face3(Number(a[g][0]),Number(a[g][1]),Number(a[g][2])));g=new THREE.MeshBasicMaterial({color:13056,side:THREE.DoubleSide,visible:!1});g=new THREE.Mesh(l,g);B=C=g.geometry.vertices[parseInt(Math.random()*
g.geometry.vertices.length)];y.add(g);a=[];for(k=0;k<l.vertices.length;k++)a.push(l.vertices[k].x),a.push(l.vertices[k].y),a.push(l.vertices[k].z);l=new THREE.BufferGeometry;l.addAttribute("position",new THREE.Float32BufferAttribute(a,3));n.push({geometry:l,mesh:g,color:c,opacity:b});g.geometry.translate(0,-10,20);l.translate(0,-10,20);e(l)})}function h(a,c,b,d){var g=[];g.push(new THREE.Vector3(0,0,0));for(var l=0;l<d;l++)g.push(new THREE.Vector3(a*Math.random()-a/2,c*Math.random()-c/2,b));g.push(new THREE.Vector3(100*
Math.random()-50,100*Math.random()-50,0));return new THREE.CatmullRomCurve3(g)}function m(a,c,b){c=c.getPoints(b);b=[];for(var g,d=1;d<c.length;d++)g=n[a].geometry.clone(),g.scale(.2*Math.random(),.2*Math.random(),.2*Math.random()),g.rotateX(2*Math.random()*Math.PI),g.rotateY(2*Math.random()*Math.PI),g.rotateZ(2*Math.random()*Math.PI),g.translate(c[d].x,c[d].y,c[d].z),b.push(g);b.push(n[a].geometry);return b}function D(a,c,b,d){for(var g=[],l=[],e=[],k=1;k<c.length;k++)g.push(c[k].attributes.position.getX(a)),
l.push(c[k].attributes.position.getY(a)),e.push(c[k].attributes.position.getZ(a));return{x:g,y:l,z:e,R:b.r,G:b.g,B:b.b,opacity:d,idx:a}}var A=!1,n=[],f=function(a,c){for(var b=[],g=[],d=[],e=[],f,k,n=a/2,h=0;h<c;h++)f=a*Math.random()-n,k=a*Math.random()-n,e.push(f),e.push(k),e.push(0),d.push(.7,.7,.7),b.push(1),g.push(0);f=new THREE.BufferGeometry;f.addAttribute("position",new THREE.Float32BufferAttribute(e,3));f.addAttribute("aColor",new THREE.Float32BufferAttribute(d,3));f.addAttribute("size",(new THREE.Float32BufferAttribute(b,
1)).setDynamic(!0));f.addAttribute("opacity",(new THREE.Float32BufferAttribute(g,1)).setDynamic(!0));return f}(a,b),p=function(a,c,b){b={map:{value:(new THREE.TextureLoader).load(b)}};b=new THREE.ShaderMaterial({uniforms:b,transparent:!0,blending:THREE.AdditiveBlending,depthTest:!1,vertexColors:!0,vertexShader:document.getElementById("particleVertexShader").text,fragmentShader:document.getElementById("particleFragmentShader").text});b=new THREE.Points(a,b);a.translate(c.x,c.y,c.z);b.sortParticles=
!1;return b}(f,c,d),r;y.add(p);return{addModel:e,update:function(){f.attributes.position.needsUpdate=!0;f.attributes.size.needsUpdate=!0;f.attributes.aColor.needsUpdate=!0;f.attributes.opacity.needsUpdate=!0},rotateY:function(a){p.rotateY(a)},firstTransition:function(a,c,b,d){function g(){f.attributes.position.setXYZ(this.idx,this.x,this.y,this.z);f.attributes.size.setX(this.idx,this.size);f.attributes.aColor.setXYZ(this.idx,this.R,this.G,this.B);f.attributes.opacity.setX(this.idx,this.opacity)}var l=
n[a].geometry,h=n[a].color,k=0,m=new THREE.Color(q[0].color);A=!1;for(var t=0;t<f.attributes.position.count;t++){var p={x:f.attributes.position.getX(t),y:f.attributes.position.getY(t),z:f.attributes.position.getZ(t),size:.3,R:m.r,G:m.g,B:m.b,opacity:0,idx:t};var D={x:l.attributes.position.getX(t),y:l.attributes.position.getY(t),z:l.attributes.position.getZ(t),size:.15,R:h.r,G:h.g,B:h.b,opacity:1,idx:t};t>=l.attributes.position.count&&(D.opacity=0);(new TWEEN.Tween(p)).to(D,c*Math.random()).easing(TWEEN.Easing.Sinusoidal.In).onUpdate(g).delay(b).onStart(function(){}).onComplete(function(){k++;
k===f.attributes.position.count-1&&(u=v=0,A=!0,r=f.clone(),a+1<q.length&&!n[a+1]&&e(q[a+1].url,new THREE.Color(q[a+1].color),1,function(a){}),d())}).start()}},transition:function(a,c){function b(){f.attributes.position.setXYZ(this.idx,this.x,this.y,this.z);f.attributes.aColor.setXYZ(this.idx,this.R,this.G,this.B);f.attributes.opacity.setX(this.idx,this.opacity)}var d=n[c].color,g=n[c].opacity,l=h(300,300,-100,2);l=m(a,l,20);var p=0;A=!1;for(var k=0;k<f.attributes.position.count;k++){var z={x:f.attributes.position.getX(k),
y:f.attributes.position.getY(k),z:f.attributes.position.getZ(k),R:d.r,G:d.g,B:d.b,opacity:g,idx:k};(new TWEEN.Tween(z)).to(D(k,l,n[a].color,n[a].opacity),Math.floor(500*Math.random()+3E3)).easing(TWEEN.Easing.Quartic.In).onUpdate(b).onComplete(function(){p++;p===f.attributes.position.count-1&&(u=v=0,r=f.clone(),A=!0,a+1<q.length&&!n[a+1]&&e(q[a+1].url,new THREE.Color(q[a+1].color),1,function(a){}))}).start()}},getPointsCloud:function(){return p},complete:function(){return A},moveCamera:function(a){var c=
new TWEEN.Tween({x:w.position.x}),b=-30;a%2&&(b=30);c.to({x:b},3500).easing(TWEEN.Easing.Exponential.Out).onUpdate(function(){w.position.x=this.x}).start()},getModel:function(a){return n[a]},modelsAmount:function(){return n.length},wave:function(a,c,b,d){if(C){var e=p.position,g=c.clone().sub(e);c=g.clone().multiplyScalar(.8);g=g.length();b*=g;g=2/(.2*g);for(var n=r.attributes.position.count,k=0;k<n;k++){var h=new THREE.Vector3(r.attributes.position.getX(k),r.attributes.position.getY(k),r.attributes.position.getZ(k)),
q=h.clone().sub(c).length(),m=h.clone();h.sub(e).normalize().multiplyScalar(Math.sin(q*g+.5-a/500)*b*Math.exp(-q/d));h.add(m);f.attributes.position.setXYZ(k,h.x,h.y,h.z)}}}}}function aa(a,b){var c=new XMLHttpRequest;c.onreadystatechange=function(){4===c.readyState&&404!==c.status&&b(c.responseText)};c.open("GET",a,!0);c.send()}function G(a){if(m.complete()){var b=h;a?h++:h--;a=m.modelsAmount();h<J?h=J:h>K?h=K:(h+1>a&&h--,h!==L&&(L=h,m.transition(h,b),m.moveCamera(h),M(h)))}}function ba(a,b,c,d){TweenLite.to(b,
.5,{ease:Power1.easeInOut,y:-20,scale:.8,delay:a,opacity:0});TweenLite.to(document.body,2,{ease:Power1.easeInOut,backgroundImage:"linear-gradient(-60deg, #000 30%, #000)",delay:a});TweenLite.to(c,.5,{ease:Power1.easeInOut,y:-45,scale:.8,delay:a,onComplete:d,opacity:0})}function ca(a){var b=document.querySelector("#note");document.querySelector("#main");var c=document.querySelector("#note__title"),d=document.querySelector("#note__text"),e=document.querySelector("#page_num .page_num_cls-2");document.querySelector("#page_num .page_num_cls-1").textContent=
a;e.style.stroke=q[a-1].color;a%2?(N(b),b.style["transform-origin"]="100% 50% 0px"):(O(b),b.style["transform-origin"]="0% 50% 0px");c.textContent="";c.style.color=q[a-1].color;d.textContent="";document.body.style.background=q[a-1].background}function M(a){function b(){a%2?(N(c),c.style["transform-origin"]="0% 50% 0px"):(O(c),c.style["transform-origin"]="100% 50% 0px");d.innerHTML=q[a].title;d.style.color=q[a].color;e.innerHTML=q[a].text;var b=d,h=e,f=q[a].background;TweenLite.to(b,0,{ease:Power1.easeInOut,
y:0,scale:1,opacity:1});TweenLite.to(h,0,{ease:Power1.easeInOut,y:0,scale:1,opacity:1});TweenLite.to(document.body,2,{ease:Power1.easeInOut,backgroundImage:f,delay:0});TweenLite.from(b,.5,{ease:Power1.easeInOut,y:20,scale:.8,delay:0,opacity:0});TweenLite.from(h,.5,{ease:Power1.easeInOut,y:20,delay:.5,opacity:0})}var c=document.querySelector("#note");document.querySelector("#main");var d=document.querySelector("#note__title"),e=document.querySelector("#note__text"),h=document.querySelector("#page_num .page_num_cls-2"),
m=document.querySelector("#page_num .page_num_cls-1"),p=!1;0>a&&(p=!0,a=0);m.textContent=a+1;h.style.stroke=q[a].color;p?b():ba(0,d,e,b)}function N(a){a.classList.remove("to_left");a.classList.add("to_right")}function O(a){a.classList.remove("to_right");a.classList.add("to_left")}function P(a){requestAnimationFrame(P);var b=m.getModel(h);if(b&&H){var c=H,d=b.mesh,e={intersects:!1,point:new THREE.Vector3};Q.setFromCamera(c,w);c=Q.intersectObject(d);0<c.length&&(e.point.copy(c[0].point),e.intersects=
!0);I=e;if(R=I.intersects)C=b.mesh.worldToLocal(I.point),e=C.clone().sub(B),c=Math.ceil(3*e.length()),S=e.divideScalar(c)}m.complete()&&b&&(R?(E=0,F++,0<F&&(B.equals(C)||B.add(S),.5>v&&(v+=.005),10<u&&(u-=.5),10>u&&(u+=.5),F=0)):(F=0,E++,0<E&&(.04<v&&(v-=.005),.04>v&&(v+=.005),50>u&&(u+=.5),E=0)),m.wave(a,B,v,u));x.render(y,w);TWEEN.update();m.update();T.update();a=Math.PI/8/p;e=U.update();b=a*(e.y-V);a*=e.x-W;(c=m.getModel(h))&&c.mesh.rotation.set(-b,-a,0,"XYZ");m.getPointsCloud().rotation.set(-b,
-a,0,"XYZ");X.style.left=e.x+"px";X.style.top=e.y+"px";e=note.offsetHeight/2;c=Math.sin(+b/2);b=Math.cos(+b/2);d=Math.sin(-a/2);a=Math.cos(-a/2);note.style.transform="matrix3d("+[a,0,-d,0,c*d,b,c*a,0,b*d,-c,b*a,0,e*c*d,-e*b,e*c*a,1].join()+")"}var y,w,x,m,T,r=window.innerWidth,p=window.innerHeight,W=.5*r,V=.5*p,R=!1,H,I;Detector.webgl||Detector.addGetWebGLMessage();var Q=new THREE.Raycaster,C,U=new function(a,b){var c,d;function e(a,b){var e=a-m.x,r=b-m.y;p=Math.sqrt(Math.pow(e,2)+Math.pow(r,2));
0===p?(c=0,d=0):(c=e/p,d=r/p);f=.01;n=0;h=m.x;q=m.y}var h=a;var q=b;var m={x:a,y:b},p,n=0,f;e(a,b);return{setPose:e,update:function(){n+=f;n=Math.min(1,Math.max(0,n));var a=(1-Math.pow(1-n,5))*p;m.x=c*a+h;m.y=d*a+q;return{x:m.x,y:m.y}}}}(W,V),h=0,q=[{title:"WORLD",text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Adipisci animi aspernatur atque corporis cumque dolores eum excepturi, harum illo incidunt labore molestiae nemo non optio reprehenderit rerum tempore temporibus! Harum!",color:"#7676d7",
background:"linear-gradient(0deg, #011a05 30%, #150352)",url:"./model/globus3.obj"},{title:"RESOURCES",text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Adipisci animi aspernatur atque corporis cumque dolores eum excepturi, harum illo incidunt labore molestiae nemo non optio reprehenderit rerum tempore temporibus! Harum!",color:"#d676d6",background:"linear-gradient(0deg, #1A0002 30%, #150352)",url:"./model/barrel3.obj"},{title:"ECOLOGY",text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Adipisci animi aspernatur atque corporis cumque dolores eum excepturi, harum illo incidunt labore molestiae nemo non optio reprehenderit rerum tempore temporibus! Harum!",
color:"#76d676",background:"linear-gradient(0deg, #011a05 30%, #150352)",url:"./model/plant3.obj"},{title:"TECHNOLOGY",text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Adipisci animi aspernatur atque corporis cumque dolores eum excepturi, harum illo incidunt labore molestiae nemo non optio reprehenderit rerum tempore temporibus! Harum!",color:"#d6d663",background:"linear-gradient(0deg, #1A0002 30%, #150352)",url:"./model/gear3.obj"},{title:"AND SO ON ...",text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Adipisci animi aspernatur atque corporis cumque dolores eum excepturi, harum illo incidunt labore molestiae nemo non optio reprehenderit rerum tempore temporibus! Harum!",
color:"#76d6d6",background:"linear-gradient(0deg, #011a05 30%, #150352)",url:"./model/bitcoin3.obj"},{title:"TITLE 6",text:"TEXT 6",color:"#ff0",background:"linear-gradient(-60deg, #3f000b, #003f15)",url:"./model/barrel3.obj"}],v=0,u=0,B,S,F=0,E=0,X=document.querySelector("#spot"),da=document.querySelector("#arrow");(function(){y=new THREE.Scene;w=new THREE.PerspectiveCamera(75,r/p,.001,1E4);w.position.set(-30,-10,115);y.add(w);x=new THREE.WebGLRenderer({antialias:!0,alpha:!0});x.setPixelRatio(window.devicePixelRatio);
x.setSize(r,p);x.setClearColor(0,0);document.getElementById("container3D").appendChild(x.domElement);T=new Y(20,"./maps/disc.png");m=new Z(200,22E3,new THREE.Vector3(0,0,100),"./maps/disc.png");var a=document.querySelector("#logo");TweenLite.to(a,0,{y:.4*window.innerHeight,scale:1.8});a.style.visibility="visible";ca(1);(function(){m.addModel(q[0].url,new THREE.Color(q[0].color),1,function(c){a=document.querySelector("#logo");TweenLite.to(a,1.5,{ease:Power1.easeInOut,scale:1,y:0,onComplete:function(){M(-1);
m.firstTransition(0,3E3,500,function(){})}})})})();window.addEventListener("resize",function(){r=window.innerWidth;p=window.innerHeight;w.aspect=r/p;w.updateProjectionMatrix();x.setSize(r,p)});da.addEventListener("click",function(){G(!0)});document.addEventListener("mousemove",function(a){var b=a.clientX;a=a.clientY;var c=b/r*2-1;var h=2*-(a/p)+1;H=new THREE.Vector2(c,h);b=Math.min(r-150,Math.max(100,b));a=Math.min(p-100,Math.max(100,a));U.setPose(b,a)});var b;document.addEventListener("touchstart",
function(a){b=a.changedTouches[0].pageY});document.addEventListener("touchend",function(a){a=a.changedTouches[0].pageY-b;200<Math.abs(a)&&G(0>a)});document.addEventListener("wheel",function(a){a.preventDefault();G(0>a.wheelDelta)})})();P();var L=0,K=4,J=0})();
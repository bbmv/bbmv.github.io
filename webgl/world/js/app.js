(function(){function Z(a,b){function c(a){var b=[-60,60];var e=[-80,40],A=[10,0],g=[-50,50],f=[-50,50],k=[-10,0],h=new THREE.Color("hsl("+(240*Math.random()+120)+", 60%, 80%)");d.attributes.aColor.setXYZ(a,h.r,h.g,h.b);b={x:Math.random()*(b[1]-b[0])+b[0],y:Math.random()*(e[1]-e[0])+e[0],z:Math.random()*(A[1]-A[0])+A[0],size:1.5*Math.random()+1,opacity:1,idx:a};a={x:Math.random()*(g[1]-g[0])+g[0],y:Math.random()*(f[1]-f[0])+f[0],z:Math.random()*(k[1]-k[0])+k[0],size:.5*Math.random()+.5,opacity:0,idx:a};
(new TWEEN.Tween(b)).to(a,3*Math.random()+3E3).easing(TWEEN.Easing.Sinusoidal.In).onUpdate(function(){d.attributes.position.setXYZ(this.idx,this.x,this.y,this.z);d.attributes.size.setX(this.idx,this.size);d.attributes.opacity.setX(this.idx,this.opacity)}).delay(6E3*Math.random()).onComplete(function(){c(this.idx)}).start()}var d=function(a){for(var c=[],b=[],e=[],d=[],f=0;f<a;f++)d.push(0),d.push(0),d.push(0),e.push(.5,.5,.5),c.push(1),b.push(0);a=new THREE.BufferGeometry;a.addAttribute("position",
new THREE.Float32BufferAttribute(d,3));a.addAttribute("aColor",new THREE.Float32BufferAttribute(e,3));a.addAttribute("size",(new THREE.Float32BufferAttribute(c,1)).setDynamic(!0));a.addAttribute("opacity",(new THREE.Float32BufferAttribute(b,1)).setDynamic(!0));return a}(a),e=function(a,c){var b={map:{value:(new THREE.TextureLoader).load(c)}};b=new THREE.ShaderMaterial({uniforms:b,transparent:!0,blending:THREE.AdditiveBlending,depthTest:!1,vertexColors:!0,vertexShader:document.getElementById("particleVertexShader").text,
fragmentShader:document.getElementById("particleFragmentShader").text});b=new THREE.Points(a,b);b.sortParticles=!1;return b}(d,b);x.add(e);(function(){for(var a=0;a<d.attributes.position.count;a++)c(a)})();return{update:function(){d.attributes.position.needsUpdate=!0;d.attributes.size.needsUpdate=!0;d.attributes.aColor.needsUpdate=!0;d.attributes.opacity.needsUpdate=!0}}}function aa(a,b,c,d){function e(a,c,b,d){ba(a,function(a){if("undefined"!==typeof Worker){if("undefined"===typeof e){var e=new Worker("./js/parser.js");
e.postMessage(a)}e.onmessage=function(a){var e=a.data.vertices,n=a.data.faces,f=new THREE.MeshBasicMaterial({color:16777215,side:THREE.DoubleSide,visible:!1});a=new THREE.BufferGeometry;a.setIndex(n);a.addAttribute("position",new THREE.Float32BufferAttribute(e,3));a.translate(0,-10,20);e=new THREE.Mesh(a,f);x.add(e);g.push({geometry:a,mesh:e,color:c,opacity:b});d(a)}}else throw"Sorry! Your browser is too old. Please update it.";})}function h(a,c,b,e){var d=[];d.push(new THREE.Vector3(0,0,0));for(var n=
0;n<e;n++)d.push(new THREE.Vector3(a*Math.random()-a/2,c*Math.random()-c/2,b));d.push(new THREE.Vector3(100*Math.random()-50,100*Math.random()-50,0));return new THREE.CatmullRomCurve3(d)}function m(a,c,b){c=c.getPoints(b);b=[];for(var e,d=1;d<c.length;d++)e=g[a].geometry.clone(),e.scale(.2*Math.random(),.2*Math.random(),.2*Math.random()),e.rotateX(2*Math.random()*Math.PI),e.rotateY(2*Math.random()*Math.PI),e.rotateZ(2*Math.random()*Math.PI),e.translate(c[d].x,c[d].y,c[d].z),b.push(e);b.push(g[a].geometry);
return b}function B(a,c,b,e){for(var d=[],f=[],n=[],g=1;g<c.length;g++)d.push(c[g].attributes.position.getX(a)),f.push(c[g].attributes.position.getY(a)),n.push(c[g].attributes.position.getZ(a));return{x:d,y:f,z:n,R:b.r,G:b.g,B:b.b,opacity:e,idx:a}}var C=!1,g=[],f=function(a,c){for(var b=[],e=[],d=[],f=[],n,g,h=a/2,k=0;k<c;k++)n=a*Math.random()-h,g=a*Math.random()-h,f.push(n),f.push(g),f.push(0),d.push(.7,.7,.7),b.push(1),e.push(0);n=new THREE.BufferGeometry;n.addAttribute("position",new THREE.Float32BufferAttribute(f,
3));n.addAttribute("aColor",new THREE.Float32BufferAttribute(d,3));n.addAttribute("size",(new THREE.Float32BufferAttribute(b,1)).setDynamic(!0));n.addAttribute("opacity",(new THREE.Float32BufferAttribute(e,1)).setDynamic(!0));return n}(a,b),l=function(a,c,b){b={map:{value:(new THREE.TextureLoader).load(b)}};b=new THREE.ShaderMaterial({uniforms:b,transparent:!0,blending:THREE.AdditiveBlending,depthTest:!1,vertexColors:!0,vertexShader:document.getElementById("particleVertexShader").text,fragmentShader:document.getElementById("particleFragmentShader").text});
b=new THREE.Points(a,b);a.translate(c.x,c.y,c.z);b.sortParticles=!1;return b}(f,c,d),p;x.add(l);return{addModel:e,update:function(){f.attributes.position.needsUpdate=!0;f.attributes.size.needsUpdate=!0;f.attributes.aColor.needsUpdate=!0;f.attributes.opacity.needsUpdate=!0},rotateY:function(a){l.rotateY(a)},firstTransition:function(a,c,b,d){function n(){f.attributes.position.setXYZ(this.idx,this.x,this.y,this.z);f.attributes.size.setX(this.idx,this.size);f.attributes.aColor.setXYZ(this.idx,this.R,
this.G,this.B);f.attributes.opacity.setX(this.idx,this.opacity)}var h=g[a].geometry,m=g[a].color,r=0,l=new THREE.Color(k[0].color);C=!1;for(var q=0;q<f.attributes.position.count;q++){var B={x:f.attributes.position.getX(q),y:f.attributes.position.getY(q),z:f.attributes.position.getZ(q),size:.3,R:l.r,G:l.g,B:l.b,opacity:0,idx:q};var D={x:h.attributes.position.getX(q),y:h.attributes.position.getY(q),z:h.attributes.position.getZ(q),size:.15,R:m.r,G:m.g,B:m.b,opacity:1,idx:q};q>=h.attributes.position.count&&
(D.opacity=0);(new TWEEN.Tween(B)).to(D,c*Math.random()).easing(TWEEN.Easing.Sinusoidal.In).onUpdate(n).delay(b).onStart(function(){}).onComplete(function(){r++;r===f.attributes.position.count-1&&(t=u=0,y=z=new THREE.Vector3(0,20,30),C=!0,p=f.clone(),a+1<k.length&&!g[a+1]&&e(k[a+1].url,new THREE.Color(k[a+1].color),1,function(a){}),d())}).start()}},transition:function(a,c){function b(){f.attributes.position.setXYZ(this.idx,this.x,this.y,this.z);f.attributes.aColor.setXYZ(this.idx,this.R,this.G,this.B);
f.attributes.opacity.setX(this.idx,this.opacity)}var d=g[c].color,n=g[c].opacity,l=h(300,300,-100,2);l=m(a,l,20);var D=0;C=!1;for(var r=0;r<f.attributes.position.count;r++){var A={x:f.attributes.position.getX(r),y:f.attributes.position.getY(r),z:f.attributes.position.getZ(r),R:d.r,G:d.g,B:d.b,opacity:n,idx:r};(new TWEEN.Tween(A)).to(B(r,l,g[a].color,g[a].opacity),Math.floor(500*Math.random()+3E3)).easing(TWEEN.Easing.Quartic.In).onUpdate(b).onComplete(function(){D++;D===f.attributes.position.count-
1&&(t=u=0,y=z=new THREE.Vector3(0,20,30),p=f.clone(),C=!0,a+1<k.length&&!g[a+1]&&e(k[a+1].url,new THREE.Color(k[a+1].color),1,function(a){}))}).start()}},getPointsCloud:function(){return l},complete:function(){return C},moveCamera:function(a){var c=new TWEEN.Tween({x:v.position.x}),b=-30;a%2&&(b=30);c.to({x:b},3500).easing(TWEEN.Easing.Exponential.Out).onUpdate(function(){v.position.x=this.x}).start()},getModel:function(a){return g[a]},modelsAmount:function(){return g.length},wave:function(a,c,b,
d){if(z){var e=l.position,g=c.clone().sub(e);c=g.clone().multiplyScalar(.8);g=g.length();b*=g;g=2/(.2*g);for(var h=p.attributes.position.count,k=0;k<h;k++){var n=new THREE.Vector3(p.attributes.position.getX(k),p.attributes.position.getY(k),p.attributes.position.getZ(k)),m=n.clone().sub(c).length(),B=n.clone();n.sub(e).normalize().multiplyScalar(Math.sin(m*g+.5-a/500)*b*Math.exp(-m/d));n.add(B);f.attributes.position.setXYZ(k,n.x,n.y,n.z)}}}}}function ba(a,b){var c=new XMLHttpRequest;c.onreadystatechange=
function(){4===c.readyState&&404!==c.status&&b(c.responseText)};c.open("GET",a,!0);c.send()}function G(a){if(m.complete()){var b=h;a?h++:h--;a=m.modelsAmount();h<J?h=J:h>K?h=K:(h+1>a&&h--,h!==L&&(L=h,m.transition(h,b),m.moveCamera(h),M(h)))}}function ca(a,b,c,d){TweenLite.to(b,.5,{ease:Power1.easeInOut,y:-20,scale:.8,delay:a,opacity:0});TweenLite.to(document.body,2,{ease:Power1.easeInOut,backgroundImage:"linear-gradient(-60deg, #000 30%, #000)",delay:a});TweenLite.to(c,.5,{ease:Power1.easeInOut,y:-45,
scale:.8,delay:a,onComplete:d,opacity:0})}function da(a){var b=document.querySelector("#note");document.querySelector("#main");var c=document.querySelector("#note__title"),d=document.querySelector("#note__text"),e=document.querySelector("#page_num .page_num_cls-2");document.querySelector("#page_num .page_num_cls-1").textContent=a;e.style.stroke=k[a-1].color;a%2?(N(b),b.style["transform-origin"]="100% 50% 0px"):(O(b),b.style["transform-origin"]="0% 50% 0px");c.textContent="";c.style.color=k[a-1].color;
d.textContent="";document.body.style.background=k[a-1].background}function M(a){function b(){a%2?(N(c),c.style["transform-origin"]="0% 50% 0px"):(O(c),c.style["transform-origin"]="100% 50% 0px");d.innerHTML=k[a].title;d.style.color=k[a].color;e.innerHTML=k[a].text;var b=d,g=e,f=k[a].background;TweenLite.to(b,0,{ease:Power1.easeInOut,y:0,scale:1,opacity:1});TweenLite.to(g,0,{ease:Power1.easeInOut,y:0,scale:1,opacity:1});TweenLite.to(document.body,2,{ease:Power1.easeInOut,backgroundImage:f,delay:0});
TweenLite.from(b,.5,{ease:Power1.easeInOut,y:20,scale:.8,delay:0,opacity:0});TweenLite.from(g,.5,{ease:Power1.easeInOut,y:20,delay:.5,opacity:0})}var c=document.querySelector("#note");document.querySelector("#main");var d=document.querySelector("#note__title"),e=document.querySelector("#note__text"),h=document.querySelector("#page_num .page_num_cls-2"),m=document.querySelector("#page_num .page_num_cls-1"),l=!1;0>a&&(l=!0,a=0);m.textContent=a+1;h.style.stroke=k[a].color;l?b():ca(0,d,e,b)}function N(a){a.classList.remove("to_left");
a.classList.add("to_right")}function O(a){a.classList.remove("to_right");a.classList.add("to_left")}function P(a){requestAnimationFrame(P);var b=m.getModel(h);if(b&&H){var c=H,d=b.mesh,e={intersects:!1,point:new THREE.Vector3};Q.setFromCamera(c,v);c=Q.intersectObject(d);0<c.length&&(e.point.copy(c[0].point),e.intersects=!0);I=e;if(R=I.intersects)z=b.mesh.worldToLocal(I.point),e=z.clone().sub(y),c=Math.ceil(3*e.length()),S=e.divideScalar(c)}m.complete()&&b&&(R?(E=0,F++,0<F&&(y.equals(z)||y.add(S),
.5>u&&(u+=.005),10<t&&(t-=.5),10>t&&(t+=.5),F=0)):(F=0,E++,0<E&&(.04<u&&(u-=.005),.04>u&&(u+=.005),50>t&&(t+=.5),E=0)),m.wave(a,y,u,t));w.render(x,v);TWEEN.update();m.update();T.update();a=Math.PI/8/l;e=U.update();b=a*(e.y-V);a*=e.x-W;(c=m.getModel(h))&&c.mesh.rotation.set(-b,-a,0,"XYZ");m.getPointsCloud().rotation.set(-b,-a,0,"XYZ");X.style.left=e.x+"px";X.style.top=e.y+"px";e=Y.offsetHeight/2;c=Math.sin(+b/2);b=Math.cos(+b/2);d=Math.sin(-a/2);a=Math.cos(-a/2);Y.style.transform="matrix3d("+[a,0,
-d,0,c*d,b,c*a,0,b*d,-c,b*a,0,e*c*d,-e*b,e*c*a,1].join()+")"}var x,v,w,m,T,p=window.innerWidth,l=window.innerHeight,W=.5*p,V=.5*l,R=!1,H,I;Detector.webgl||Detector.addGetWebGLMessage();var Q=new THREE.Raycaster,U=new function(a,b){var c,d;function e(a,b){var e=a-l.x,p=b-l.y;m=Math.sqrt(Math.pow(e,2)+Math.pow(p,2));0===m?(c=0,d=0):(c=e/m,d=p/m);f=.01;g=0;h=l.x;k=l.y}var h=a;var k=b;var l={x:a,y:b},m,g=0,f;e(a,b);return{setPose:e,update:function(){g+=f;g=Math.min(1,Math.max(0,g));var a=(1-Math.pow(1-
g,5))*m;l.x=c*a+h;l.y=d*a+k;return{x:l.x,y:l.y}}}}(W,V),Y=document.querySelector("#note"),h=0,k=[{title:"WORLD",text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Adipisci animi aspernatur atque corporis cumque dolores eum excepturi, harum illo incidunt labore molestiae nemo non optio reprehenderit rerum tempore temporibus! Harum!",color:"#7676d7",background:"linear-gradient(0deg, #011a05 30%, #150352)",url:"./model/globus3.obj"},{title:"RESOURCES",text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Adipisci animi aspernatur atque corporis cumque dolores eum excepturi, harum illo incidunt labore molestiae nemo non optio reprehenderit rerum tempore temporibus! Harum!",
color:"#d676d6",background:"linear-gradient(0deg, #1A0002 30%, #150352)",url:"./model/barrel3.obj"},{title:"ECOLOGY",text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Adipisci animi aspernatur atque corporis cumque dolores eum excepturi, harum illo incidunt labore molestiae nemo non optio reprehenderit rerum tempore temporibus! Harum!",color:"#76d676",background:"linear-gradient(0deg, #011a05 30%, #150352)",url:"./model/plant3.obj"},{title:"TECHNOLOGY",text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Adipisci animi aspernatur atque corporis cumque dolores eum excepturi, harum illo incidunt labore molestiae nemo non optio reprehenderit rerum tempore temporibus! Harum!",
color:"#d6d663",background:"linear-gradient(0deg, #1A0002 30%, #150352)",url:"./model/gear3.obj"},{title:"AND SO ON ...",text:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Adipisci animi aspernatur atque corporis cumque dolores eum excepturi, harum illo incidunt labore molestiae nemo non optio reprehenderit rerum tempore temporibus! Harum!",color:"#76d6d6",background:"linear-gradient(0deg, #011a05 30%, #150352)",url:"./model/bitcoin3.obj"}],u=0,t=0,z,y,S,F=0,E=0,X=document.querySelector("#spot"),
ea=document.querySelector("#arrow");(function(){x=new THREE.Scene;v=new THREE.PerspectiveCamera(75,p/l,.001,1E4);v.position.set(-30,-10,115);x.add(v);w=new THREE.WebGLRenderer({antialias:!0,alpha:!0});w.setPixelRatio(window.devicePixelRatio);w.setSize(p,l);w.setClearColor(0,0);document.getElementById("container3D").appendChild(w.domElement);T=new Z(20,"./maps/disc.png");m=new aa(200,22E3,new THREE.Vector3(0,0,100),"./maps/disc.png");var a=document.querySelector("#logo");TweenLite.to(a,0,{y:.4*window.innerHeight,
scale:1.8});a.style.visibility="visible";da(1);(function(){m.addModel(k[0].url,new THREE.Color(k[0].color),1,function(b){a=document.querySelector("#logo");TweenLite.to(a,1.5,{ease:Power1.easeInOut,scale:1,y:0,onComplete:function(){M(-1);m.firstTransition(0,3E3,500,function(){})}})})})();window.addEventListener("resize",function(){p=window.innerWidth;l=window.innerHeight;v.aspect=p/l;v.updateProjectionMatrix();w.setSize(p,l)});ea.addEventListener("click",function(){G(!0)});document.addEventListener("mousemove",
function(a){var b=a.clientX;a=a.clientY;var c=b/p*2-1;var h=2*-(a/l)+1;H=new THREE.Vector2(c,h);b=Math.min(p-150,Math.max(100,b));a=Math.min(l-100,Math.max(100,a));U.setPose(b,a)});var b;document.addEventListener("touchstart",function(a){b=a.changedTouches[0].pageY});document.addEventListener("touchend",function(a){a=a.changedTouches[0].pageY-b;200<Math.abs(a)&&G(0>a)});document.addEventListener("wheel",function(a){a.preventDefault();G(0>a.wheelDelta)})})();P();window.setImmediate||(window.setImmediate=
function(){function a(a){a.data===d&&(b=b.next,a=b.func,delete b.func,a())}var b={},c=b,d=Math.random();window.addEventListener?window.addEventListener("message",a):window.attachEvent("onmessage",a);return function(a){c=c.next={func:a};window.postMessage(d,"*")}}());var L=0,K=4,J=0})();
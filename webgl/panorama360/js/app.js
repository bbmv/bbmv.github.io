(function(){function g(a,e){function d(b){a.attributes.pSize.setX(b.idx,b.size);a.attributes.pSize.needsUpdate=!0}for(var c=0;c<e;c++){var m=a.attributes.pSize.getX(c),n=1E3*Math.random()+1E3,b={idx:c,size:m},f=new TWEEN.Tween(b);f.to({size:1.2*Math.random()+.3},n);f.easing(TWEEN.Easing.Linear.None);f.delay(5E3*Math.random()+1E3);f.onUpdate(function(a){d(a)});b=new TWEEN.Tween(b);b.to({size:m},n);b.easing(TWEEN.Easing.Linear.None);b.onUpdate(function(a){d(a)});f.chain(b);b.chain(f);f.start()}}function h(a,
c,d,e,m){for(var n=[],b=[],f=[],g=[],h,k,l,p=0,r=0,v=0;p<d;){h=a*Math.random()*Math.pow(-1,Math.round(Math.random()));k=a*Math.random()*Math.pow(-1,Math.round(Math.random()));l=a*Math.random()*Math.pow(-1,Math.round(Math.random()));var w=c*c,x=a*a,t=h*h+k*k+l*l;r++;x<t||w>t?v++:(p++,g.push(h),g.push(k),g.push(l),f.push(1,1,1),n.push(.3*Math.random()+.05),b.push(e))}a=new THREE.BufferGeometry;a.addAttribute("position",new THREE.Float32BufferAttribute(g,3));a.addAttribute("color",new THREE.Float32BufferAttribute(f,
3));a.addAttribute("pSize",(new THREE.Float32BufferAttribute(n,1)).setDynamic(!0));a.addAttribute("pOpacity",(new THREE.Float32BufferAttribute(b,1)).setDynamic(!0));uniforms={map:{value:(new THREE.TextureLoader).load(m)},size:{value:10},opacity:{value:1},scale:{value:4},psColor:{value:new THREE.Color(16777215)}};m=new THREE.ShaderMaterial({uniforms:uniforms,blending:THREE.AdditiveBlending,depthWrite:!1,depthTest:!0,transparent:!0,vertexColors:!0,vertexShader:document.getElementById("particleVertexShader").text,
fragmentShader:document.getElementById("particleFragmentShader").text});u=new THREE.Points(a,m);q.add(u);return a}function p(){requestAnimationFrame(p);TWEEN.update();geomBlue1.rotateZ(k);geomYellow1.rotateZ(k);geomBlue2.rotateZ(k);geomYellow2.rotateZ(k);d.render(q,c)}Detector.webgl||Detector.addGetWebGLMessage();var q=new THREE.Scene,c=new THREE.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,1E3);c.position.set(0,0,0);q.add(c);var l=new THREE.OrbitControls(c);l.target=new THREE.Vector3(0,
.5,-2);l.update();var e=new TWEEN.Tween({opacity:1});e.to({opacity:.3},2E3);e.easing(TWEEN.Easing.Linear.None);e.repeat(100);e.yoyo(!0);e.onUpdate(function(a){document.getElementById("loading").style.opacity=a.opacity});e.start();l=new THREE.SphereBufferGeometry(5,60,40);var r=new THREE.MeshBasicMaterial({map:(new THREE.TextureLoader).load("../img/textures/CARB_02SX2.png",function(){document.getElementById("loading").style.display="none";e.stop()}),side:THREE.BackSide,depthWrite:!0,depthTest:!0,alphaTest:.5,
transparent:!0});panorama=new THREE.Mesh(l,r);q.add(panorama);var d=new THREE.WebGLRenderer;d.setPixelRatio(window.devicePixelRatio);d.setSize(window.innerWidth,window.innerHeight);d.setClearColor(new THREE.Color(0));document.body.appendChild(d.domElement);var u,k=2*Math.PI/34560;geomYellow1=h(6,5,5E3,1,"../img/star05.png");geomBlue1=h(6,5,5E3,1,"../img/star06.png");geomYellow2=h(6,5,5E3,.8,"../img/star09.png");geomBlue2=h(6,5,5E3,.8,"../img/star10.png");g(geomYellow1,250);g(geomBlue1,250);g(geomYellow2,
250);g(geomBlue2,250);p();window.addEventListener("resize",function(){c.aspect=window.innerWidth/window.innerHeight;c.updateProjectionMatrix();d.setSize(window.innerWidth,window.innerHeight)},!1)})();
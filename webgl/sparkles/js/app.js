(function(){function t(){requestAnimationFrame(t);TWEEN.update();c.attributes.position.needsUpdate=!0;c.attributes.pSize.needsUpdate=!0;c.attributes.color.needsUpdate=!0;h.rotateY(p);h.rotateX(p);h.rotateZ(p);d.render(q,b)}Detector.webgl||Detector.addGetWebGLMessage();var q=new THREE.Scene,b=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1E3);b.position.z=5;b.position.y=2;b.position.x=2;new THREE.OrbitControls(b);q.add(b);var d=new THREE.WebGLRenderer;d.setPixelRatio(window.devicePixelRatio);
d.setSize(window.innerWidth,window.innerHeight);d.setClearColor(new THREE.Color(0));document.body.appendChild(d.domElement);var h,c,p=2*Math.PI/1080;(function(m,a){for(var e=[],f=[],g=[],l=[],k,n,b,d=0;d<a;)k=m*Math.random()*Math.pow(-1,Math.round(Math.random())),n=m*Math.random()*Math.pow(-1,Math.round(Math.random())),b=m*Math.random()*Math.pow(-1,Math.round(Math.random())),m*m<k*k+b*b+n*n||(d++,l.push(k),l.push(n),l.push(b),g.push(.7,.7,.7),e.push(.5),f.push(Math.random()/4+.5));c=new THREE.BufferGeometry;
c.addAttribute("position",new THREE.Float32BufferAttribute(l,3));c.addAttribute("color",new THREE.Float32BufferAttribute(g,3));c.addAttribute("pSize",(new THREE.Float32BufferAttribute(e,1)).setDynamic(!0));c.addAttribute("pOpacity",(new THREE.Float32BufferAttribute(f,1)).setDynamic(!0));uniforms={map:{value:(new THREE.TextureLoader).load("../img/ps_ball.png")},size:{value:10},opacity:{value:.5},scale:{value:4},psColor:{value:new THREE.Color(16777215)}};e=new THREE.ShaderMaterial({uniforms:uniforms,
transparent:!0,blending:THREE.AdditiveBlending,depthTest:!1,vertexColors:!0,vertexShader:document.getElementById("particleVertexShader").text,fragmentShader:document.getElementById("particleFragmentShader").text});h=new THREE.Points(c,e);h.sortParticles=!0;q.add(h)})(4,12E3);var g=new THREE.BufferGeometry;g.addAttribute("position",new THREE.Float32BufferAttribute(sanpedro,3));g.scale(.1,.1,.1);g.rotateX(-Math.PI/4);g.rotateY(Math.PI/12);g.rotateZ(-Math.PI/1.5);var f=new THREE.BufferGeometry;f.addAttribute("position",
new THREE.Float32BufferAttribute(nautilus,3));f.scale(.08,.08,.08);f.rotateY(Math.PI/2);f.rotateX(-Math.PI/4);f.rotateY(Math.PI/12);f.rotateZ(-Math.PI/1.5);var u=[],v=[],w=[];(function(){function b(a){c.attributes.position.setXYZ(a.idx,a.x,a.y,a.z);c.attributes.pSize.setX(a.idx,a.size);c.attributes.color.setXYZ(a.idx,a.R,a.G,a.B)}for(var a=0;a<c.attributes.position.count;a++){var e={x:c.attributes.position.getX(a),y:c.attributes.position.getY(a),z:c.attributes.position.getZ(a),size:.5,R:.7,G:.7,B:.7,
idx:a},d=JSON.parse(JSON.stringify(e)),h=new TWEEN.Tween(e);h.to(d,2E3);h.easing(TWEEN.Easing.Exponential.In);h.onUpdate(b);var l=new TWEEN.Tween(e);l.to(d,2E3);l.easing(TWEEN.Easing.Exponential.In);l.onUpdate(b);if(a<g.attributes.position.count){d={x:g.attributes.position.getX(a),y:g.attributes.position.getY(a),z:g.attributes.position.getZ(a),size:.7,R:1,G:1,B:1,idx:a};var k=new TWEEN.Tween(e);k.to(d,5E3);k.easing(TWEEN.Easing.Elastic.Out);k.delay(700);k.onUpdate(b);u.push(k);v.push(h.chain(k))}a<
f.attributes.position.count&&(d={x:f.attributes.position.getX(a),y:f.attributes.position.getY(a),z:f.attributes.position.getZ(a),size:.7,R:1,G:1,B:1,idx:a},e=new TWEEN.Tween(e),e.to(d,5E3),e.easing(TWEEN.Easing.Elastic.Out),e.delay(700),e.onUpdate(b),l.chain(e));w.push(l)}setTimeout(function(){u.forEach(function(a){a.start()})},1E3)})();t();document.addEventListener("click",function(b){r?(TWEEN.removeAll(),w.forEach(function(a){a.start()})):(TWEEN.removeAll(),v.forEach(function(a){a.start()}));r=
!r},!1);var r=!0;window.addEventListener("resize",function(){b.aspect=window.innerWidth/window.innerHeight;b.updateProjectionMatrix();d.setSize(window.innerWidth,window.innerHeight)},!1)})();
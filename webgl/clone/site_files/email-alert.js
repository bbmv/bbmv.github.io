/*
Compressed: 2015-07-28
*/
$(function(){var d=$("#name"),c=$("#email"),f=$([]).add(d).add(c),b=$(".validateTips");function e(h){b.text(h).addClass("ui-state-highlight");setTimeout(function(){},500)}function g(j,k,i,h){if(j.val().length>h||j.val().length<i){j.addClass("ui-state-error");e("Please enter your "+k+"");return false}else{return true}}function a(i,h,j){if(!(h.test(i.val()))){i.addClass("ui-state-error");e(j);return false}else{return true}}$("#cancelFix").click(function(){f.val("").removeClass("ui-state-error");$("#dialog-form").dialog("close")});$("#dialog-form").dialog({autoOpen:false,height:400,width:400,modal:true,buttons:{"Alert Me":function(){var h=true;f.removeClass("ui-state-error");h=h&&g(d,"name",3,80);h=h&&g(c,"email",6,80);h=h&&a(d,/^[a-z]([0-9a-z ])+$/i,"name may consist of a-z, 0-9, spaces, begin with a letter.");h=h&&a(c,/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,"Please provide a valid email address");if(h){$("#users tbody").append("<tr><td>"+d.val()+"</td><td>"+c.val()+"</td></tr>");var i=$("form[name='subscriber']").serialize();$.ajax({type:"POST",url:"/ajax/email-alert.dna",data:i,dataType:"json",timeout:5000,error:function(k,j){b.hide();$("#subscriber").hide();$("p.emailalert").hide();$(".ui-dialog-buttonset").hide();$("#message_ajax").html("<br/><div class='successMessage' style='text-align:center;font-weight:bold;'>Thank you, "+d.val()+"<br/>we will send you an email<br/>as soon as this item is available from our warehouse.<br/><br/>Why don't you consider an online PRE-ORDER to guarantee<br/>that you will receive this item as soon as it is available.<br/>PRE-ORDERS are allocated FIRST when stock arrives.</div>");$("#cancelFix").show()},success:function(j){$(".ui-dialog-buttonset").hide();b.hide();$("#subscriber").hide();$("p.emailalert").hide();$("#message_ajax").html("<br/><div class='successMessage' style='text-align:center;font-weight:bold;'>Thank you, "+d.val()+"<br/>we will send you an email<br/>as soon as this item is available from our warehouse.<br/><br/>Why don't you consider an online PRE-ORDER to guarantee<br/>that you will receive this item as soon as it is available.<br/>PRE-ORDERS are allocated FIRST when stock arrives.</div>");$("#cancelFix").show()}});return false;$(this).dialog("close")}},Cancel:function(){$(this).dialog("close")}},close:function(){f.val("").removeClass("ui-state-error")}});$("[id*='create-subscriber']").click(function(){$("#dialog-form").dialog("open")})});